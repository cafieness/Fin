{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/cafieness/Desktop/FMS-TEAM4/app/src/pages/Overview/Overview.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PeopleOutlineTwoToneIcon from '@material-ui/icons/PeopleOutlineTwoTone';\nimport { Paper, makeStyles, TableBody, TableRow, TableCell, Toolbar, InputAdornment } from '@material-ui/core';\nimport useTable from '../../components/useTable';\nimport * as Service from '../../services/Service';\nimport Income from './Income';\nimport Expense from './Expense';\nimport Transfer from './Transfer';\nimport './Overview.scss';\nimport Controls from '../../components/controls/Controls';\nimport { Search } from '@material-ui/icons';\nimport AddIcon from '@material-ui/icons/Add';\nimport Popup from '../../components/Popup';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport CloseIcon from '@material-ui/icons/Close';\nconst headCells = [{\n  id: 'date',\n  label: 'Дата',\n  disableSorting: true\n}, {\n  id: 'type',\n  label: 'Тип',\n  disableSorting: true\n}, {\n  id: 'money',\n  label: 'Сумма',\n  disableSorting: true\n}, {\n  id: 'balanceId',\n  label: 'Счет',\n  disableSorting: true\n}, {\n  id: 'categoryId',\n  label: 'Категория',\n  disableSorting: true\n}, {\n  id: 'contractorId',\n  label: 'Контрагент',\n  disableSorting: true\n}, {\n  id: 'projectId',\n  label: 'Проект',\n  disableSorting: true\n}];\nexport default function Overview() {\n  _s();\n\n  const [recordForEdit, setRecordForEdit] = useState(null);\n  const [records, setRecords] = useState(Service.getAllTransactions());\n  const [filterFn, setFilterFn] = useState({\n    fn: items => {\n      return items;\n    }\n  });\n  const [openTransfer, setOpenTransfer] = useState(false);\n  const [openExpense, setOpenExpense] = useState(false);\n  const [openIncome, setOpenIncome] = useState(false);\n  const {\n    TblContainer,\n    TblHead,\n    TblPagination,\n    recordsAfterPagingAndSorting\n  } = useTable(records, headCells, filterFn);\n\n  const handleSearch = e => {\n    let target = e.target;\n    setFilterFn({\n      fn: items => {\n        if (target.value == '') return items;else return items.filter(x => x.fullName.toLowerCase().includes(target.value));\n      }\n    });\n  };\n\n  const addOrEdit = (transaction, resetForm) => {\n    if (transaction.id == 0) Service.insertTransaction(transaction);else Service.updateTransaction(transaction);\n    resetForm();\n    setRecordForEdit(null);\n    setOpenExpense(false);\n    setOpenTransfer(false);\n    setOpenIncome(false);\n    setRecords(Service.getAllTransactions());\n  };\n\n  const getCollection = (itemId, collection) => {\n    if (itemId != undefined && itemId != '') {\n      return collection[itemId - 1].title;\n    } else {\n      return '';\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n      className: \"buttonRow\",\n      children: [/*#__PURE__*/_jsxDEV(Controls.Button, {\n        text: \"\\u0414\\u043E\\u0445\\u043E\\u0434\",\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 22\n        }, this),\n        className: \"buttonRow__btn btn-income\",\n        onClick: () => {\n          setOpenIncome(true);\n          setRecordForEdit(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controls.Button, {\n        className: \"btn-expense\",\n        text: \"\\u0420\\u0430\\u0441\\u0445\\u043E\\u0434\",\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 22\n        }, this),\n        background: \"#32b482\",\n        onClick: () => {\n          setOpenExpense(true);\n          setRecordForEdit(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controls.Button, {\n        className: \"btn-transfer\",\n        text: \"\\u041F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0434\",\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 22\n        }, this),\n        background: \"#32b482\",\n        onClick: () => {\n          setOpenTransfer(true);\n          setRecordForEdit(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TblContainer, {\n      children: [/*#__PURE__*/_jsxDEV(TblHead, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: recordsAfterPagingAndSorting().map(item => /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            children: item.date.substring(0, 10)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: item.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: item.money\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: getCollection(item.balance, Service.getBalanceCollection())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: getCollection(item.categoryId, Service.getCategoryCollection())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: getCollection(item.contractorId, Service.getContractorCollection())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: getCollection(item.projectId, Service.getProjectCollection())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TblPagination, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"\\u0414\\u043E\\u0445\\u043E\\u0434\",\n      openPopup: openIncome,\n      setOpenPopup: setOpenIncome,\n      children: /*#__PURE__*/_jsxDEV(Income, {\n        recordForEdit: recordForEdit,\n        addOrEdit: addOrEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"\\u0420\\u0430\\u0441\\u0445\\u043E\\u0434\",\n      openPopup: openExpense,\n      setOpenPopup: setOpenExpense,\n      children: /*#__PURE__*/_jsxDEV(Expense, {\n        recordForEdit: recordForEdit,\n        addOrEdit: addOrEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"\\u041F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0434\",\n      openPopup: openTransfer,\n      setOpenPopup: setOpenTransfer,\n      children: /*#__PURE__*/_jsxDEV(Transfer, {\n        recordForEdit: recordForEdit,\n        addOrEdit: addOrEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Overview, \"8gGs010hZNk3F4aVC5hmipoxWCo=\", false, function () {\n  return [useTable];\n});\n\n_c = Overview;\n\nvar _c;\n\n$RefreshReg$(_c, \"Overview\");","map":{"version":3,"sources":["/home/cafieness/Desktop/FMS-TEAM4/app/src/pages/Overview/Overview.js"],"names":["React","useState","PeopleOutlineTwoToneIcon","Paper","makeStyles","TableBody","TableRow","TableCell","Toolbar","InputAdornment","useTable","Service","Income","Expense","Transfer","Controls","Search","AddIcon","Popup","EditOutlinedIcon","CloseIcon","headCells","id","label","disableSorting","Overview","recordForEdit","setRecordForEdit","records","setRecords","getAllTransactions","filterFn","setFilterFn","fn","items","openTransfer","setOpenTransfer","openExpense","setOpenExpense","openIncome","setOpenIncome","TblContainer","TblHead","TblPagination","recordsAfterPagingAndSorting","handleSearch","e","target","value","filter","x","fullName","toLowerCase","includes","addOrEdit","transaction","resetForm","insertTransaction","updateTransaction","getCollection","itemId","collection","undefined","title","map","item","date","substring","type","money","balance","getBalanceCollection","categoryId","getCategoryCollection","contractorId","getContractorCollection","projectId","getProjectCollection"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PeopleOutlineTwoToneIcon from '@material-ui/icons/PeopleOutlineTwoTone';\nimport {\n  Paper,\n  makeStyles,\n  TableBody,\n  TableRow,\n  TableCell,\n  Toolbar,\n  InputAdornment,\n} from '@material-ui/core';\nimport useTable from '../../components/useTable';\nimport * as Service from '../../services/Service';\nimport Income from './Income';\nimport Expense from './Expense';\nimport Transfer from './Transfer';\nimport './Overview.scss';\n\nimport Controls from '../../components/controls/Controls';\nimport { Search } from '@material-ui/icons';\nimport AddIcon from '@material-ui/icons/Add';\nimport Popup from '../../components/Popup';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst headCells = [\n  { id: 'date', label: 'Дата', disableSorting: true },\n  { id: 'type', label: 'Тип', disableSorting: true },\n  { id: 'money', label: 'Сумма', disableSorting: true },\n  { id: 'balanceId', label: 'Счет', disableSorting: true },\n  { id: 'categoryId', label: 'Категория', disableSorting: true },\n  { id: 'contractorId', label: 'Контрагент', disableSorting: true },\n  { id: 'projectId', label: 'Проект', disableSorting: true },\n];\n\nexport default function Overview() {\n  const [recordForEdit, setRecordForEdit] = useState(null);\n  const [records, setRecords] = useState(Service.getAllTransactions());\n  const [filterFn, setFilterFn] = useState({\n    fn: (items) => {\n      return items;\n    },\n  });\n  const [openTransfer, setOpenTransfer] = useState(false);\n  const [openExpense, setOpenExpense] = useState(false);\n  const [openIncome, setOpenIncome] = useState(false);\n\n  const { TblContainer, TblHead, TblPagination, recordsAfterPagingAndSorting } = useTable(\n    records,\n    headCells,\n    filterFn,\n  );\n\n  const handleSearch = (e) => {\n    let target = e.target;\n    setFilterFn({\n      fn: (items) => {\n        if (target.value == '') return items;\n        else return items.filter((x) => x.fullName.toLowerCase().includes(target.value));\n      },\n    });\n  };\n\n  const addOrEdit = (transaction, resetForm) => {\n    if (transaction.id == 0) Service.insertTransaction(transaction);\n    else Service.updateTransaction(transaction);\n    resetForm();\n    setRecordForEdit(null);\n    setOpenExpense(false);\n    setOpenTransfer(false);\n    setOpenIncome(false);\n    setRecords(Service.getAllTransactions());\n  };\n  const getCollection = (itemId, collection) => {\n    if (itemId != undefined && itemId != '') {\n      return collection[itemId - 1].title;\n    } else {\n      return '';\n    }\n  };\n\n  return (\n    <>\n      <Toolbar className=\"buttonRow\">\n        <Controls.Button\n          text=\"Доход\"\n          variant=\"outlined\"\n          startIcon={<AddIcon />}\n          className=\"buttonRow__btn btn-income\"\n          onClick={() => {\n            setOpenIncome(true);\n            setRecordForEdit(null);\n          }}\n        />\n        <Controls.Button\n          className=\"btn-expense\"\n          text=\"Расход\"\n          variant=\"outlined\"\n          startIcon={<AddIcon />}\n          background=\"#32b482\"\n          onClick={() => {\n            setOpenExpense(true);\n            setRecordForEdit(null);\n          }}\n        />\n        <Controls.Button\n          className=\"btn-transfer\"\n          text=\"Перевод\"\n          variant=\"outlined\"\n          startIcon={<AddIcon />}\n          background=\"#32b482\"\n          onClick={() => {\n            setOpenTransfer(true);\n            setRecordForEdit(null);\n          }}\n        />\n      </Toolbar>\n      <TblContainer>\n        <TblHead />\n        <TableBody>\n          {recordsAfterPagingAndSorting().map((item) => (\n            <TableRow key={item.id}>\n              <TableCell>{item.date.substring(0, 10)}</TableCell>\n              <TableCell>{item.type}</TableCell>\n              <TableCell>{item.money}</TableCell>\n              <TableCell>{getCollection(item.balance, Service.getBalanceCollection())}</TableCell>\n              <TableCell>\n                {getCollection(item.categoryId, Service.getCategoryCollection())}\n              </TableCell>\n              <TableCell>\n                {getCollection(item.contractorId, Service.getContractorCollection())}\n              </TableCell>\n              <TableCell>{getCollection(item.projectId, Service.getProjectCollection())}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </TblContainer>\n      <TblPagination />\n      <Popup title=\"Доход\" openPopup={openIncome} setOpenPopup={setOpenIncome}>\n        <Income recordForEdit={recordForEdit} addOrEdit={addOrEdit} />\n      </Popup>\n      <Popup title=\"Расход\" openPopup={openExpense} setOpenPopup={setOpenExpense}>\n        <Expense recordForEdit={recordForEdit} addOrEdit={addOrEdit} />\n      </Popup>\n      <Popup title=\"Перевод\" openPopup={openTransfer} setOpenPopup={setOpenTransfer}>\n        <Transfer recordForEdit={recordForEdit} addOrEdit={addOrEdit} />\n      </Popup>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}